{% extends 'navbar.html' %}
{% block title %}{{ book.title }}{% endblock %}
{% block body %}
<div class="container mt-5">
  <div class="row">
    <div class="col-md-4">
      <img src="{{ book.image.url }}" class="img-fluid rounded" alt="{{ book.title }}">
    </div>
    <div class="col-md-8">
      <h2>{{ book.title }}</h2>
      <p><strong>Author:</strong> {{ book.author }}</p>
      <p><strong>ISBN:</strong> {{ book.isbn_no }}</p>
      <p><strong>Category:</strong> {{ book.category }}</p>
      <p><strong>Published:</strong> {{ book.publish }}</p>
      <p><strong>Available:</strong> {{ book.is_available|yesno:"Yes,No" }}</p>
      <p><strong>Price:</strong> â‚¹{{ book.price }}</p>
      <p><strong>Description: </strong>{{ book.description }}</p>
      <button type="button" class="btn btn-success" onclick="window.location.href='/book_list'">Book List</button>
      {% if request.session.role == 'admin' %}
      <div style="display: flex; align-items: center;">
        <div class="mt-2">
          <a href="{% url 'update_book' book.id %}" class="btn btn-outline-primary">Update</a>
          <a href="{% url 'delete_book' book.id %}" class="btn btn-outline-warning" onclick="return confirm('Are you sure you want to delete this book?');">Delete</a>
      </div>
      {% endif %}
      {% if request.session.role != 'admin' %}
      <div style="display: flex; align-items: center;">
        <div class="mt-2">
          {% if not already_requested_or_assigned %}
            {% if book.is_available %}
              <a href="{% url 'assign' book.id %}" class="btn btn-outline-primary">Request Book</a>
            {% else %}
              <span class="text-danger">Book not available</span>
            {% endif %}
        {% else %}
          <span class="text-success">Already Requested/Assigned</span>
    {% endif %}
  </div>
</div>
{% endif %}

      </div>
    </div>
  </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

{% endblock %}
